\documentclass[preview]{standalone}
\usepackage[utf8]{inputenc}
\usepackage{preview}
\PreviewEnvironment{tikzpicture}

\usepackage{color}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{algorithmic}
\usepackage{xcolor}
\usepackage{mathtools}
\usepackage{tikz}
\usepackage{tikz-qtree}
\usepackage[export]{adjustbox}


\usetikzlibrary{shapes.geometric, shapes.misc, shapes.arrows, shapes.callouts, shapes.multipart, fit, positioning, calc, matrix, automata, arrows.meta}

\definecolor{BehaviorTreeSelectorColor}{HTML}{00FFFF}
\definecolor{BehaviorTreeSequenceColor}{HTML}{FFA500}
\definecolor{BehaviorTreeParallelColor}{HTML}{FFD700}
\definecolor{BehaviorTreeLeafColor}{HTML}{C0C0C0}

\tikzset{
    Selector/.style={
        draw=black,
        fill=BehaviorTreeSelectorColor,
        text=black,
        shape=chamfered rectangle,
        minimum size=15pt,
        inner sep=0pt,
        font=\tiny
    },
    Sequence/.style={
        draw=black,
        fill=BehaviorTreeSequenceColor,
        text=black,
        shape=rectangle,
        minimum size=15pt,
        inner sep=0pt,
        font=\tiny
    },
    Parallel/.style={
        draw=black,
        fill=BehaviorTreeParallelColor,
        text=black,
        shape=trapezium,
        trapezium left angle=60,
        trapezium right angle=120,
        minimum size=15pt,
        inner sep=0pt,
        trapezium stretches body,
        font=\tiny,
        align=center
    },
    Decorator/.style={
        draw=black,
        fill=white,
        text=black,
        shape=trapezium,
        trapezium left angle=67,
        trapezium right angle=67,
        minimum size=15pt,
        inner sep=0pt,
        trapezium stretches body,
        font=\tiny,
        align=center
    },
    Action/.style={
        draw=black,
        fill=BehaviorTreeLeafColor,
        text=black,
        shape=ellipse,
        minimum size=15pt,
        inner sep=0pt,
        font=\tiny
    },
    Check/.style={
        draw=black,
        fill=BehaviorTreeLeafColor,
        text=red,
        shape=ellipse,
        minimum size=15pt,
        inner sep=0pt,
        font=\tiny
    },
    Blackboard/.style={
        draw=blue,
        fill=white,
        text=black,
        shape=rectangle,
        font=\tiny,
        inner sep = .5pt,
        inner xsep = -3pt,
        anchor = north
    }
}

\newcommand{\Invalid}{\texttt{\itshape{I}}}
\newcommand{\Failure}{\texttt{\itshape{F}}}
\newcommand{\Running}{\texttt{\itshape{R}}}
\newcommand{\Success}{\texttt{\itshape{S}}}

\definecolor{BehaviorTreeBlackboardColor}{HTML}{0000FF} %blue
\definecolor{BehaviorTreeEnvironmentColor}{HTML}{FF8C00} %dark orange
\definecolor{NeuralVarColor}{HTML}{A0522D}
\newcommand{\NeuralVar}[1]{\texttt{\itshape{\textcolor{NeuralVarColor}{#1}}}}
\newcommand{\EnvVar}[1]{\texttt{\itshape{\textcolor{BehaviorTreeEnvironmentColor}{#1}}}}
\newcommand{\BlVar}[1]{\texttt{\itshape{\textcolor{BehaviorTreeBlackboardColor}{#1}}}}

\newcommand{\SwapArrow}{\rightleftharpoons{}}
\newcommand{\NodeStatus}{\texttt{\itshape{N}}}
\newcommand{\True}{\top}
\newcommand{\False}{\bot}


\begin{document}
\begin{adjustbox}{max width = \linewidth}

\begin{tikzpicture}
\tikzset{level distance=20pt}
\tikzset{sibling distance=0.5pt}
\Tree[.\node[Sequence](Drone){$Drone$\textcircled{M}};
[.\node[Parallel](Start){$Start$\textcircled{M}\{All\}};
[.\node[Action](StartD){$StartD$};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{droneStatus}\begin{math} \in \end{math}\texttt{(}\begin{math}\{\texttt{failed}\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{droneStatus} = \texttt{failed})\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{\texttt{on}\}\end{math}\\\begin{math}\quad{}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{droneStatus} = \texttt{on})\end{math}\texttt{ else}\\\begin{math}\quad{}\quad{}\end{math}\texttt{(}\begin{math}\{\texttt{on}, \texttt{failed}, \texttt{trying}\}\end{math}\texttt{)))}\\\begin{math}\end{math}\texttt{if }\begin{math}(\BlVar{droneStatus} = \texttt{on})\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{elif }\begin{math}(\BlVar{droneStatus} = \texttt{trying})\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Running\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Failure\end{math}\end{tabular}};]
[.\node[Action](StartC){$StartC$};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{camStatus}\begin{math} \in \end{math}\texttt{(}\begin{math}\{\texttt{failed}\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{camStatus} = \texttt{failed})\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{\texttt{on}\}\end{math}\\\begin{math}\quad{}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{camStatus} = \texttt{on})\end{math}\texttt{ else}\\\begin{math}\quad{}\quad{}\end{math}\texttt{(}\begin{math}\{\texttt{on}, \texttt{failed}, \texttt{trying}\}\end{math}\texttt{)))}\\\begin{math}\end{math}\BlVar{camT}\begin{math} \in \end{math}\begin{math}\{\False{}\}\end{math}\\\begin{math}\end{math}\texttt{if }\begin{math}(\BlVar{camStatus} = \texttt{on})\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{elif }\begin{math}(\BlVar{camStatus} = \texttt{trying})\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Running\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Failure\end{math}\end{tabular}};]
]
[.\node[Sequence](Main){$Main$};
[.\node[Sequence](Seq1){$Seq1$\textcircled{M}};
[.\node[Selector](Sel1){$Sel1$};
[.\node[Decorator](SIsF1){$SIsF1$\{\begin{math}\Success{}\mapsto{}\Failure{}\end{math}\}};
[.\node[Action](MeasureB){$MeasureB$};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Failure\end{math}\end{tabular}};]
]
[.\node[Check](BNotCritical1){$BNotCritical1$};\node[Blackboard]{\begin{tabular}{l}\texttt{if }\begin{math}\neg ((\EnvVar{battery} = \texttt{critical}))\end{math}\texttt{:}\\{}\begin{math}\quad{}\NodeStatus{}\coloneqq{} \Success{}\end{math}\\{}\texttt{else:}\\{}\begin{math}\quad{}\NodeStatus{}\coloneqq{}\Failure{}\end{math}\end{tabular}};]
[.\node[Action](Land1){$Land1$};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\begin{math}\{0\}\end{math}\\\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{vert}\}\end{math}\\\begin{math}\end{math}\texttt{if }\begin{math}(\EnvVar{z\_a} = 0)\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
]
[.\node[Check](BNotCritical2){$BNotCritical2$};\node[Blackboard]{\begin{tabular}{l}\texttt{if }\begin{math}\neg ((\EnvVar{battery} = \texttt{critical}))\end{math}\texttt{:}\\{}\begin{math}\quad{}\NodeStatus{}\coloneqq{} \Success{}\end{math}\\{}\texttt{else:}\\{}\begin{math}\quad{}\NodeStatus{}\coloneqq{}\Failure{}\end{math}\end{tabular}};]
[.\node[Selector](Sel2){$Sel2$\textcircled{M}};
[.\node[Check](BGood){$BGood$};\node[Blackboard]{\begin{tabular}{l}\texttt{if }\begin{math}(\EnvVar{battery} = \texttt{good})\end{math}\texttt{:}\\{}\begin{math}\quad{}\NodeStatus{}\coloneqq{} \Success{}\end{math}\\{}\texttt{else:}\\{}\begin{math}\quad{}\NodeStatus{}\coloneqq{}\Failure{}\end{math}\end{tabular}};]
[.\node[Action](GoTo0){$GoTo0$\begin{math}\{\texttt{xn}\coloneqq{}(-10), \texttt{yn}\coloneqq{}(-10)\}\end{math}};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{full}\}\end{math}\\\begin{math}\end{math}\BlVar{x\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{xn}\}\end{math}\\\begin{math}\end{math}\BlVar{y\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{yn}\}\end{math}\\\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\texttt{(}\begin{math}\{5\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{z\_i} = 0)\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{\BlVar{z\_i}\}\end{math}\texttt{))}\\\begin{math}\end{math}\texttt{if }\begin{math}((\EnvVar{x\_a} = \BlVar{x\_g}) \land (\EnvVar{y\_a} = \BlVar{y\_g}) \land (\EnvVar{z\_a} = \BlVar{z\_g}))\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
]
]
[.\node[Selector](Sel3){$Sel3$\textcircled{M}};
[.\node[Check](LOk){$LOk$};\node[Blackboard]{\begin{tabular}{l}\texttt{if }\begin{math}\EnvVar{loc}\end{math}\texttt{:}\\{}\begin{math}\quad{}\NodeStatus{}\coloneqq{} \Success{}\end{math}\\{}\texttt{else:}\\{}\begin{math}\quad{}\NodeStatus{}\coloneqq{}\Failure{}\end{math}\end{tabular}};]
[.\node[Decorator](SIsF2){$SIsF2$\{\begin{math}\Success{}\mapsto{}\Failure{}\end{math}\}};
[.\node[Decorator](RIsF1){$RIsF1$\{\begin{math}\Running{}\mapsto{}\Failure{}\end{math}\}};
[.\node[Action](Land2){$Land2$};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\begin{math}\{0\}\end{math}\\\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{vert}\}\end{math}\\\begin{math}\end{math}\texttt{if }\begin{math}(\EnvVar{z\_a} = 0)\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
]
]
]
[.\node[Sequence](Seq2){$Seq2$\textcircled{M}};
[.\node[Action](Takeoff){$Takeoff$};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{vert}\}\end{math}\\\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\begin{math}\{5\}\end{math}\\\begin{math}\end{math}\texttt{if }\begin{math}(\EnvVar{z\_a} = \BlVar{z\_g})\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Failure\end{math}\end{tabular}};]
[.\node[Parallel](Par1){$Par1$\{One\}};
[.\node[Action](CameraTrack){$CameraTrack$};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{camT}\begin{math} \in \end{math}\begin{math}\{\True{}, \False{}\}\end{math}\\\begin{math}\end{math}\texttt{if }\begin{math}\BlVar{camT}\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
[.\node[Decorator](Rep){$Rep$\{x3\}};
[.\node[Sequence](Seq3){$Seq3$\textcircled{M}};
[.\node[Action](SetFLS){$SetFLS$};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\texttt{(}\begin{math}\{10\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{z\_i} = 5)\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{min(40, (10 + \BlVar{z\_i}))\}\end{math}\texttt{))}\\\begin{math}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Success\end{math}\end{tabular}};]
[.\node[Action](GoTo1){$GoTo1$\begin{math}\{\texttt{xn}\coloneqq{}(-30), \texttt{yn}\coloneqq{}(-30)\}\end{math}};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{full}\}\end{math}\\\begin{math}\end{math}\BlVar{x\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{xn}\}\end{math}\\\begin{math}\end{math}\BlVar{y\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{yn}\}\end{math}\\\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\texttt{(}\begin{math}\{5\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{z\_i} = 0)\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{\BlVar{z\_i}\}\end{math}\texttt{))}\\\begin{math}\end{math}\texttt{if }\begin{math}((\EnvVar{x\_a} = \BlVar{x\_g}) \land (\EnvVar{y\_a} = \BlVar{y\_g}) \land (\EnvVar{z\_a} = \BlVar{z\_g}))\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
[.\node[Action](GoTo2){$GoTo2$\begin{math}\{\texttt{xn}\coloneqq{}(-15), \texttt{yn}\coloneqq{}30\}\end{math}};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{full}\}\end{math}\\\begin{math}\end{math}\BlVar{x\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{xn}\}\end{math}\\\begin{math}\end{math}\BlVar{y\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{yn}\}\end{math}\\\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\texttt{(}\begin{math}\{5\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{z\_i} = 0)\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{\BlVar{z\_i}\}\end{math}\texttt{))}\\\begin{math}\end{math}\texttt{if }\begin{math}((\EnvVar{x\_a} = \BlVar{x\_g}) \land (\EnvVar{y\_a} = \BlVar{y\_g}) \land (\EnvVar{z\_a} = \BlVar{z\_g}))\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
[.\node[Action](GoTo3){$GoTo3$\begin{math}\{\texttt{xn}\coloneqq{}0, \texttt{yn}\coloneqq{}(-30)\}\end{math}};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{full}\}\end{math}\\\begin{math}\end{math}\BlVar{x\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{xn}\}\end{math}\\\begin{math}\end{math}\BlVar{y\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{yn}\}\end{math}\\\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\texttt{(}\begin{math}\{5\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{z\_i} = 0)\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{\BlVar{z\_i}\}\end{math}\texttt{))}\\\begin{math}\end{math}\texttt{if }\begin{math}((\EnvVar{x\_a} = \BlVar{x\_g}) \land (\EnvVar{y\_a} = \BlVar{y\_g}) \land (\EnvVar{z\_a} = \BlVar{z\_g}))\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
[.\node[Action](GoTo4){$GoTo4$\begin{math}\{\texttt{xn}\coloneqq{}15, \texttt{yn}\coloneqq{}30\}\end{math}};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{full}\}\end{math}\\\begin{math}\end{math}\BlVar{x\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{xn}\}\end{math}\\\begin{math}\end{math}\BlVar{y\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{yn}\}\end{math}\\\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\texttt{(}\begin{math}\{5\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{z\_i} = 0)\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{\BlVar{z\_i}\}\end{math}\texttt{))}\\\begin{math}\end{math}\texttt{if }\begin{math}((\EnvVar{x\_a} = \BlVar{x\_g}) \land (\EnvVar{y\_a} = \BlVar{y\_g}) \land (\EnvVar{z\_a} = \BlVar{z\_g}))\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
[.\node[Action](GoTo5){$GoTo5$\begin{math}\{\texttt{xn}\coloneqq{}30, \texttt{yn}\coloneqq{}(-30)\}\end{math}};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{full}\}\end{math}\\\begin{math}\end{math}\BlVar{x\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{xn}\}\end{math}\\\begin{math}\end{math}\BlVar{y\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{yn}\}\end{math}\\\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\texttt{(}\begin{math}\{5\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{z\_i} = 0)\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{\BlVar{z\_i}\}\end{math}\texttt{))}\\\begin{math}\end{math}\texttt{if }\begin{math}((\EnvVar{x\_a} = \BlVar{x\_g}) \land (\EnvVar{y\_a} = \BlVar{y\_g}) \land (\EnvVar{z\_a} = \BlVar{z\_g}))\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
[.\node[Action](GoTo6){$GoTo6$\begin{math}\{\texttt{xn}\coloneqq{}30, \texttt{yn}\coloneqq{}(-30)\}\end{math}};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{full}\}\end{math}\\\begin{math}\end{math}\BlVar{x\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{xn}\}\end{math}\\\begin{math}\end{math}\BlVar{y\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{yn}\}\end{math}\\\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\texttt{(}\begin{math}\{5\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{z\_i} = 0)\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{\BlVar{z\_i}\}\end{math}\texttt{))}\\\begin{math}\end{math}\texttt{if }\begin{math}((\EnvVar{x\_a} = \BlVar{x\_g}) \land (\EnvVar{y\_a} = \BlVar{y\_g}) \land (\EnvVar{z\_a} = \BlVar{z\_g}))\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
]
]
]
[.\node[Action](GoTo7){$GoTo7$\begin{math}\{\texttt{xn}\coloneqq{}0, \texttt{yn}\coloneqq{}0\}\end{math}};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{full}\}\end{math}\\\begin{math}\end{math}\BlVar{x\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{xn}\}\end{math}\\\begin{math}\end{math}\BlVar{y\_g}\begin{math} \in \end{math}\begin{math}\{\texttt{yn}\}\end{math}\\\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\texttt{(}\begin{math}\{5\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{z\_i} = 0)\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{\BlVar{z\_i}\}\end{math}\texttt{))}\\\begin{math}\end{math}\texttt{if }\begin{math}((\EnvVar{x\_a} = \BlVar{x\_g}) \land (\EnvVar{y\_a} = \BlVar{y\_g}) \land (\EnvVar{z\_a} = \BlVar{z\_g}))\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
[.\node[Action](Land3){$Land3$};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\begin{math}\{0\}\end{math}\\\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{vert}\}\end{math}\\\begin{math}\end{math}\texttt{if }\begin{math}(\EnvVar{z\_a} = 0)\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Success\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Running\end{math}\end{tabular}};]
[.\node[Action](Shutdown){$Shutdown$};\node[Blackboard]{\begin{tabular}{l}\begin{math}\end{math}\BlVar{droneStatus}\begin{math} \in \end{math}\begin{math}\{\texttt{on}, \texttt{off}\}\end{math}\\\begin{math}\end{math}\texttt{if }\begin{math}(\BlVar{droneStatus} = \texttt{on})\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq \Running\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatus{} \coloneqq{} \Success\end{math}\end{tabular}};]
[.\node[Check](CheckCam){$CheckCam$};\node[Blackboard]{\begin{tabular}{l}\texttt{if }\begin{math}\BlVar{camT}\end{math}\texttt{:}\\{}\begin{math}\quad{}\NodeStatus{}\coloneqq{} \Success{}\end{math}\\{}\texttt{else:}\\{}\begin{math}\quad{}\NodeStatus{}\coloneqq{}\Failure{}\end{math}\end{tabular}};]
]
]
]
\node[Blackboard, anchor=south east] (initialValues) at ([xshift=-20pt, yshift=10pt]Drone.north west){\begin{tabular}{l}\texttt{-INITIAL VALUES-}\\{}\begin{math}\end{math}\BlVar{droneStatus}\begin{math} \in \end{math}\begin{math}\{\texttt{off}\}\end{math}\\\begin{math}\end{math}\BlVar{camStatus}\begin{math} \in \end{math}\begin{math}\{\texttt{off}\}\end{math}\\\begin{math}\end{math}\BlVar{camT}\begin{math} \in \end{math}\begin{math}\{\False{}\}\end{math}\\\begin{math}\end{math}\BlVar{move}\begin{math} \in \end{math}\begin{math}\{\texttt{none}\}\end{math}\\\begin{math}\end{math}\BlVar{z\_i}\begin{math} \in \end{math}\begin{math}\{0\}\end{math}\\\begin{math}\end{math}\BlVar{x\_g}\begin{math} \in \end{math}\begin{math}\{0\}\end{math}\\\begin{math}\end{math}\BlVar{y\_g}\begin{math} \in \end{math}\begin{math}\{0\}\end{math}\\\begin{math}\end{math}\BlVar{z\_g}\begin{math} \coloneqq{} \end{math}\texttt{(}\begin{math}5\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVar{z\_i} = 5)\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}(2 \cdot \BlVar{z\_i})\end{math}\texttt{))}\\\begin{math}\end{math}\EnvVar{x\_a}\begin{math} \in \end{math}\begin{math}\{0\}\end{math}\\\begin{math}\end{math}\EnvVar{y\_a}\begin{math} \in \end{math}\begin{math}\{0\}\end{math}\\\begin{math}\end{math}\EnvVar{z\_a}\begin{math} \in \end{math}\begin{math}\{0\}\end{math}\\\begin{math}\end{math}\EnvVar{battery}\begin{math} \in \end{math}\begin{math}\{\texttt{good}\}\end{math}\\\begin{math}\end{math}\EnvVar{loc}\begin{math} \in \end{math}\begin{math}\{\True{}, \False{}\}\end{math}\\\end{tabular}};
\node[Blackboard, anchor=south east] (varInfo) at ([xshift=-20pt]initialValues.south west){\begin{tabular}{l}\texttt{-VARIABLE INFO-}\\{}\BlVar{droneStatus} - \texttt{VAR} - \texttt{\{}\texttt{off}, \texttt{on}, \texttt{failed}, \texttt{trying}\texttt{\}}\\{}\BlVar{camStatus} - \texttt{VAR} - \texttt{\{}\texttt{off}, \texttt{on}, \texttt{failed}, \texttt{trying}\texttt{\}}\\{}\BlVar{camT} - \texttt{VAR} - \texttt{BOOLEAN}\\{}\BlVar{move} - \texttt{VAR} - \texttt{\{}\texttt{full}, \texttt{vert}, \texttt{none}\texttt{\}}\\{}\BlVar{z\_i} - \texttt{VAR} - \texttt{\{}0, 5, 10, 20, 30, 40\texttt{\}}\\{}\BlVar{x\_g} - \texttt{VAR} - \texttt{\{}(-30), (-15), (-10), 0, 15, 30\texttt{\}}\\{}\BlVar{y\_g} - \texttt{VAR} - \texttt{\{}(-30), (-15), (-10), 0, 15, 30\texttt{\}}\\{}\BlVar{z\_g} - \texttt{DEFINE} - \texttt{INT}\\{}\EnvVar{x\_a} - \texttt{VAR} - [-30, 30]\\{}\EnvVar{y\_a} - \texttt{VAR} - [-30, 30]\\{}\EnvVar{z\_a} - \texttt{VAR} - [0, 80]\\{}\EnvVar{battery} - \texttt{VAR} - \texttt{\{}\texttt{good}, \texttt{low}, \texttt{critical}\texttt{\}}\\{}\EnvVar{loc} - \texttt{VAR} - \texttt{BOOLEAN}\end{tabular}};
\node[Blackboard, anchor=south west] (environmentUpdates) at ([xshift=20pt, yshift=10pt]Drone.north east){\begin{tabular}{l}\texttt{-ENVIRONMENT UPDATES-}\\{}\begin{math}\end{math}\EnvVar{loc}\begin{math} \in \end{math}\begin{math}\{\True{}, \False{}\}\end{math}\\\begin{math}\end{math}\EnvVar{battery}\begin{math} \in \end{math}\texttt{(}\begin{math}\{\texttt{good}, \texttt{low}\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}((\BlVar{droneStatus} = \texttt{on}) \land (\EnvVar{battery} = \texttt{good}))\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{\texttt{low}, \texttt{critical}\}\end{math}\\\begin{math}\quad{}\quad{}\end{math}\texttt{if }\begin{math}((\BlVar{droneStatus} = \texttt{on}) \land (\EnvVar{battery} = \texttt{low}))\end{math}\texttt{ else}\\\begin{math}\quad{}\quad{}\end{math}\texttt{(}\begin{math}\{\EnvVar{battery}\}\end{math}\texttt{)))}\\\begin{math}\end{math}\EnvVar{x\_a}\begin{math} \in \end{math}\texttt{(}\begin{math}\{(\EnvVar{x\_a} + 1)\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}((\BlVar{move} = \texttt{full}) \land (\EnvVar{x\_a} < \BlVar{x\_g}))\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{(\EnvVar{x\_a} - 1)\}\end{math}\\\begin{math}\quad{}\quad{}\end{math}\texttt{if }\begin{math}((\BlVar{move} = \texttt{full}) \land (\EnvVar{x\_a} > \BlVar{x\_g}))\end{math}\texttt{ else}\\\begin{math}\quad{}\quad{}\end{math}\texttt{(}\begin{math}\{\EnvVar{x\_a}\}\end{math}\texttt{)))}\\\begin{math}\end{math}\EnvVar{y\_a}\begin{math} \in \end{math}\texttt{(}\begin{math}\{(\EnvVar{y\_a} + 1)\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}((\BlVar{move} = \texttt{full}) \land (\EnvVar{y\_a} < \BlVar{y\_g}))\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{(\EnvVar{y\_a} - 1)\}\end{math}\\\begin{math}\quad{}\quad{}\end{math}\texttt{if }\begin{math}((\BlVar{move} = \texttt{full}) \land (\EnvVar{y\_a} > \BlVar{y\_g}))\end{math}\texttt{ else}\\\begin{math}\quad{}\quad{}\end{math}\texttt{(}\begin{math}\{\EnvVar{y\_a}\}\end{math}\texttt{)))}\\\begin{math}\end{math}\EnvVar{z\_a}\begin{math} \in \end{math}\texttt{(}\begin{math}\{(\EnvVar{z\_a} + 1)\}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(((\BlVar{move} = \texttt{full}) \lor (\BlVar{move} = \texttt{vert})) \land (\EnvVar{z\_a} < \BlVar{z\_g}))\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\texttt{(}\begin{math}\{(\EnvVar{z\_a} - 1)\}\end{math}\\\begin{math}\quad{}\quad{}\end{math}\texttt{if }\begin{math}(((\BlVar{move} = \texttt{full}) \lor (\BlVar{move} = \texttt{vert})) \land (\EnvVar{z\_a} > \BlVar{z\_g}))\end{math}\texttt{ else}\\\begin{math}\quad{}\quad{}\end{math}\texttt{(}\begin{math}\{\EnvVar{z\_a}\}\end{math}\texttt{)))}\\\end{tabular}};
\end{tikzpicture}
\end{adjustbox}
\end{document}
