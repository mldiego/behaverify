\begin{tikzpicture}
\tikzset{level distance=20pt}
\tikzset{sibling distance=0.5pt}
\Tree[.\node[Sequence](Primes){$Primes$};
[.\node[Action](RunInd){\begin{tabular}{c}$RunInd$\end{tabular}};\node[Blackboard](RunIndUPDATEBLACKBOARD){\begin{tabular}{l}\begin{math}\end{math}\begin{math}\BlVarTikz{inVar} \in \end{math}\begin{math}\{\texttt{\textquotesingle{}UseIndex\textquotesingle{}}\}\end{math}\\\begin{math}\end{math}\begin{math}\BlVarTikz{out} \in \end{math}\begin{math}\{\NeuralVarTikz{net}\}\end{math}\\\begin{math}\end{math}\begin{math}\BlVarTikz{inVar} \in \end{math}\begin{math}\{\texttt{\textquotesingle{}UseArray\textquotesingle{}}\}\end{math}\\\begin{math}\end{math}\texttt{if }\begin{math}(\BlVarTikz{out} = \NeuralVarTikz{net})\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatusTikz{} \coloneqq \SuccessTikz{}\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatusTikz{} \coloneqq{} \FailureTikz{}\end{math}\end{tabular}};]
[.\node[Action](SetInd){\begin{tabular}{c}$SetInd$\end{tabular}};\node[Blackboard](SetIndUPDATEBLACKBOARD){\begin{tabular}{l}\begin{math}\end{math}\texttt{if }\begin{math}(\BlVarTikz{ind} = 4)\end{math}\texttt{:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatusTikz{} \coloneqq \SuccessTikz{}\end{math}\\\begin{math}\end{math}\texttt{else:}\\\begin{math}\quad{}\end{math}\begin{math}\NodeStatusTikz{} \coloneqq{} \RunningTikz{}\end{math}\\\begin{math}\end{math}\begin{math}\BlVarTikz{ind} \in \end{math}\begin{math}\{min(4, (\BlVarTikz{ind} + 1))\}\end{math}\end{tabular}};]
]
\node[draw=none,inner sep=0pt, fit=(RunIndUPDATEBLACKBOARD)(SetIndUPDATEBLACKBOARD)] (sereneblackboardfitbox) {};
\node[Blackboard, anchor=south east] (initialValues) at ([xshift=-5pt]sereneblackboardfitbox.south west){\begin{tabular}{l}\texttt{-INITIAL VALUES-}\\{}\begin{math}\end{math}\begin{math}\BlVarTikz{ind} \in \end{math}\begin{math}\{0\}\end{math}\\\begin{math}\end{math}\begin{math}\texttt{temp} \coloneqq{}\end{math}[]\\\begin{math}\end{math}\texttt{for (index, val) in temp:}\\\begin{math}\quad{}\end{math}\begin{math}\BlVarTikz{arr}[\texttt{index}] \in \texttt{val}\end{math}\\\begin{math}\end{math}\begin{math}\BlVarTikz{inVar} \in \end{math}\begin{math}\{\texttt{\textquotesingle{}UseIndex\textquotesingle{}}\}\end{math}\\\begin{math}\end{math}\begin{math}\BlVarTikz{inVal} \coloneqq{} \end{math}\texttt{(}\begin{math}\BlVarTikz{ind}\end{math}\\\begin{math}\quad{}\end{math}\texttt{if }\begin{math}(\BlVarTikz{inVar} = \texttt{\textquotesingle{}UseIndex\textquotesingle{}})\end{math}\texttt{ else}\\\begin{math}\quad{}\end{math}\begin{math}\BlVarTikz{arr}[\BlVarTikz{ind}]\end{math}\texttt{)}\\\begin{math}\NeuralVarTikz{net}\end{math}\texttt{ -INPUTS- (}\begin{math}\BlVarTikz{inVal}\end{math}\texttt{)}\\{}\begin{math}\end{math}\begin{math}\BlVarTikz{out} \in \end{math}\begin{math}\{\texttt{\textquotesingle{}Prime\textquotesingle{}}\}\end{math}\\\end{tabular}};
\node[Blackboard, anchor=south east] (varInfo) at ([xshift=-5pt]initialValues.south west){\begin{tabular}{l}\texttt{-VARIABLE INFO-}\\{}\BlVarTikz{ind} - \texttt{VAR} - [0, 4]\\{}\BlVarTikz{arr} - \texttt{array 5} - \texttt{FROZENVAR} - [0, 9]\\{}\BlVarTikz{inVar} - \texttt{VAR} - \texttt{\{}\texttt{\textquotesingle{}UseIndex\textquotesingle{}}, \texttt{\textquotesingle{}UseArray\textquotesingle{}}\texttt{\}}\\{}\BlVarTikz{inVal} - \texttt{DEFINE} - \texttt{INT}\\{}\NeuralVarTikz{net} - \texttt{NEURAL} - \texttt{\{}\texttt{\textquotesingle{}NotPrime\textquotesingle{}}, \texttt{\textquotesingle{}Prime\textquotesingle{}}\texttt{\}}\\{}\BlVarTikz{out} - \texttt{VAR} - \texttt{\{}\texttt{\textquotesingle{}NotPrime\textquotesingle{}}, \texttt{\textquotesingle{}Prime\textquotesingle{}}\texttt{\}}\end{tabular}};
\node[Blackboard, anchor=south west] (environmentUpdates) at ([xshift=5pt]sereneblackboardfitbox.south east){\begin{tabular}{l}\texttt{-ENVIRONMENT UPDATES-}\\{}\end{tabular}};
\end{tikzpicture}
